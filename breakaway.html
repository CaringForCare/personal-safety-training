<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Selector - Caring for Care</title>
    <style>
        :root {
            --primary-blue: #005eb8; /* Caring for Care Blue-ish tone */
            --primary-purple: #9b009b;
            --accent-green: #28a745;
            --light-bg: #f4f7fa;
            --white: #ffffff;
            --text-dark: #333333;
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            background-color: var(--white);
            width: 100%;
            max-width: 700px;
            padding: 2.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-top: 20px;
        }

        /* Typography */
        h1 { color: var(--primary-blue); font-size: 1.8rem; text-align: center; margin-bottom: 0.5rem; }
        h2 { color: var(--primary-blue); font-size: 1.4rem; margin-top: 0; }
        .subtitle { text-align: center; color: #666; margin-bottom: 2rem; line-height: 1.5; }

        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            background-color: var(--white);
            color: var(--text-dark);
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }

        .btn:hover {
            border-color: var(--primary-blue);
            background-color: #f0f7ff;
            color: var(--primary-blue);
        }

        .btn-primary {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
            color: var(--white);
            text-align: center;
        }

        .btn-primary:hover {
            background-color: #004494;
            border-color: #004494;
            color: var(--white);
        }

        .btn-restart {
            background-color: transparent;
            border: none;
            color: #777;
            text-align: center;
            margin-top: 20px;
            text-decoration: underline;
        }
        .btn-restart:hover { background: none; color: var(--text-dark); }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: #eaeaea;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 25px;
            display: none;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--accent-green);
            width: 0%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Screens */
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.4s ease-in-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Results Styling */
        .course-card {
            border: 1px solid #e0e0e0;
            border-left: 6px solid var(--primary-blue);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 6px;
            background: #fff;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .course-card h3 { margin: 0; font-size: 1.15rem; color: #222; }
        .course-card p { margin: 0; font-size: 0.95rem; color: #555; line-height: 1.4; }
        
        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
            background: #eef;
            color: var(--primary-blue);
            font-weight: 600;
            margin-bottom: 5px;
            width: fit-content;
        }

        .book-btn {
            display: inline-block;
            background-color: var(--accent-green);
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
            align-self: flex-start;
            transition: background 0.2s;
        }

        .book-btn:hover { background-color: #218838; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Training Needs Assessor</h1>
        <div class="progress-container" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </header>

    <div id="welcome-screen" class="screen active">
        <p class="subtitle">Find the exact Caring for Care training modules you need to ensure safety and compliance.</p>
        <button class="btn btn-primary" onclick="startQuiz()">Start Assessment</button>
    </div>

    <div id="quiz-screen" class="screen">
        <h2 id="question-text">Question goes here</h2>
        <div id="options-container"></div>
    </div>

    <div id="results-screen" class="screen">
        <h2>Your Recommended Training Plan</h2>
        <p class="subtitle">Based on your answers, we recommend booking the following courses:</p>
        
        <div id="course-list"></div>

        <button class="btn btn-restart" onclick="restartQuiz()">Start Over</button>
    </div>
</div>

<script>
    // --- Data Configuration ---

    const questions = [
        {
            id: 'role',
            text: "What is your primary role?",
            options: ["Support Worker", "Nurse", "Senior Carer", "Manager", "Community Support"]
        },
        {
            id: 'target_group',
            text: "Do you work primarily with Adults or Children?",
            options: ["Adults", "Children / Young People"]
        },
        {
            id: 'challenging_behavior',
            text: "Do you support individuals with behaviours that challenge?",
            options: ["Yes (Frequent)", "Sometimes", "No"]
        },
        {
            id: 'aggression',
            text: "Is there a risk of physical aggression or violence?",
            options: ["Yes", "No"]
        },
        {
            id: 'focus',
            text: "What is your priority for this training?",
            options: ["Prevention & De-escalation", "Physical Skills (Breakaway/Restraint)", "Both"]
        }
    ];

    // --- Course Database with Direct Links ---
    const courses = {
        prevent: {
            title: "Prevent Duty Training",
            desc: "Mandatory awareness on radicalisation and safeguarding vulnerable individuals.",
            url: "https://caringforcare.co.uk/courses/prevent-training/",
            tag: "Statutory"
        },
        breakaway: {
            title: "Breakaway Training",
            desc: "Essential skills to disengage safely from grabs, bites, and holds without restraining.",
            url: "https://caringforcare.co.uk/courses/breakaway-training/",
            tag: "Personal Safety"
        },
        managing_behavior: {
            title: "Managing Challenging Behaviour",
            desc: "Understand triggers, de-escalation, and strategies to reduce incidents.",
            url: "https://caringforcare.co.uk/courses/managing-challenging-behaviour-training/",
            tag: "Core Skill"
        },
        pbs: {
            title: "PBS (Positive Behaviour Support) Training",
            desc: "Evidence-based approach to improving quality of life and reducing restrictive practices.",
            url: "https://caringforcare.co.uk/courses/pbs-training/",
            tag: "Advanced Care"
        },
        physical_intervention: {
            title: "Physical Intervention Training",
            desc: "Safe, low-level physical techniques to manage risks when de-escalation fails (Adults).",
            url: "https://caringforcare.co.uk/courses/physical-intervention-training/",
            tag: "Intervention"
        },
        positive_handling: {
            title: "Positive Handling Training",
            desc: "Specialised handling and intervention techniques for working with children and young people.",
            url: "https://caringforcare.co.uk/courses/positive-handling-training/",
            tag: "Schools & Youth"
        },
        restraint: {
            title: "Restraint Training",
            desc: "Advanced techniques for high-risk environments involving safe physical containment.",
            url: "https://caringforcare.co.uk/courses/restraint-training/",
            tag: "High Risk"
        }
    };

    // --- State Management ---
    let currentQuestionIndex = 0;
    let userAnswers = {};

    // --- DOM Elements ---
    const welcomeScreen = document.getElementById('welcome-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const progressBar = document.getElementById('progress-bar');
    const progressContainer = document.getElementById('progress-container');
    const courseList = document.getElementById('course-list');

    // --- Functions ---

    function startQuiz() {
        welcomeScreen.classList.remove('active');
        quizScreen.classList.add('active');
        progressContainer.style.display = 'block';
        currentQuestionIndex = 0;
        userAnswers = {};
        renderQuestion();
    }

    function renderQuestion() {
        const question = questions[currentQuestionIndex];
        questionText.textContent = question.text;
        optionsContainer.innerHTML = '';

        // Update Progress Bar
        const progress = ((currentQuestionIndex) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;

        question.options.forEach(option => {
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.textContent = option;
            btn.onclick = () => handleAnswer(question.id, option);
            optionsContainer.appendChild(btn);
        });
    }

    function handleAnswer(questionId, answer) {
        userAnswers[questionId] = answer;
        currentQuestionIndex++;

        if (currentQuestionIndex < questions.length) {
            renderQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        quizScreen.classList.remove('active');
        resultsScreen.classList.add('active');
        progressBar.style.width = '100%';
        
        const recommendations = generateRecommendations();
        renderRecommendations(recommendations);
    }

    function generateRecommendations() {
        let recommended = [];

        // 1. PREVENT (Universal Recommendation)
        recommended.push(courses.prevent);

        // 2. BEHAVIOR MANAGEMENT PATH
        if (userAnswers.challenging_behavior === "Yes (Frequent)") {
            recommended.push(courses.pbs); // Higher level for frequent issues
        } else if (userAnswers.challenging_behavior === "Sometimes") {
            recommended.push(courses.managing_behavior);
        }

        // 3. PHYSICAL SKILLS PATH
        const needsPhysical = userAnswers.aggression === "Yes" || userAnswers.focus.includes("Physical") || userAnswers.focus === "Both";
        const highRiskRole = ["Nurse", "Senior Carer", "Manager"].includes(userAnswers.role);

        if (needsPhysical) {
            // Always include Breakaway as the foundation
            recommended.push(courses.breakaway);

            if (userAnswers.target_group === "Children / Young People") {
                // If working with kids -> Positive Handling
                recommended.push(courses.positive_handling);
            } else {
                // If working with adults
                if (highRiskRole && userAnswers.aggression === "Yes") {
                    // High risk role + Aggression -> Restraint
                    recommended.push(courses.restraint);
                } else {
                    // Standard risk + Aggression -> Physical Intervention
                    recommended.push(courses.physical_intervention);
                }
            }
        }

        return recommended;
    }

    function renderRecommendations(recCourses) {
        courseList.innerHTML = '';
        recCourses.forEach(course => {
            const card = document.createElement('div');
            card.className = 'course-card';
            card.innerHTML = `
                <span class="tag">${course.tag}</span>
                <h3>${course.title}</h3>
                <p>${course.desc}</p>
                <a href="${course.url}" target="_blank" class="book-btn">View Course Details</a>
            `;
            courseList.appendChild(card);
        });
    }

    function restartQuiz() {
        resultsScreen.classList.remove('active');
        welcomeScreen.classList.add('active');
        progressContainer.style.display = 'none';
        progressBar.style.width = '0%';
    }
</script>

</body>
</html>